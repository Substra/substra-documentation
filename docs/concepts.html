

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Concepts &mdash; Substra 1.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Architecture" href="architecture.html" />
    <link rel="prev" title="Demo" href="demo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Substra
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
</ul>
<p><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Local Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup/index.html">Server setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo.html">Demo</a></li>
</ul>
<p><span class="caption-text">Platform description</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#objective">Objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset">Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-samples-and-datasets">Data samples and datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-opener">Data opener</a></li>
<li class="toctree-l3"><a class="reference internal" href="#link-with-other-concepts">Link with other concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#algo">Algo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Link with other concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#model">Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Link with other concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#traintuple">Traintuple</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Link with other concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testtuple">Testtuple</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Link with other concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#machine-learning-tasks">Machine Learning tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#train-and-test-data">Train and test data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#training-task">Training task</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-task">Testing task</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary-of-docker-containers-and-volumes">Summary of Docker containers and volumes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
</ul>
<p><span class="caption-text">Specific entry points</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing to Substra</a></li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Build &amp; publish the documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Substra</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Concepts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="concepts">
<h1>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="#objective">Objective</a></p></li>
<li><p><a class="reference external" href="#dataset">Dataset</a></p></li>
<li><p><a class="reference external" href="#algo">Algo</a></p></li>
<li><p><a class="reference external" href="#model">Model</a></p></li>
<li><p><a class="reference external" href="#traintuple">Traintuple</a></p></li>
<li><p><a class="reference external" href="#testtuple">Testtuple</a></p></li>
<li><p><a class="reference external" href="#machine-learning-tasks">Machine Learning tasks</a></p></li>
</ul>
<p>All of the concepts mentioned below are assets (basically a set of files) which are associated with a unique identifier on the platform. Below is a global figure gathering all the assets and the links between each other.</p>
<p><img alt="Relationships between assets" src="_images/assets_relationships.png" /></p>
<section id="objective">
<h2>Objective<a class="headerlink" href="#objective" title="Permalink to this headline">¶</a></h2>
<p>An objective is simply made of:</p>
<ul class="simple">
<li><p>a test dataset, that is to say a data manager associated with several test data samples</p></li>
<li><p>a metrics script (<a class="reference external" href="https://github.com/SubstraFoundation/substra-tools/blob/master/docs/api.md#metrics">python implementation</a>).</p></li>
</ul>
<p>It mainly aims at standardizing the evaluation process of ML models. Since Substra focuses on supervised learning, each models trained on Substra has to be linked to an objective for evaluation.</p>
</section>
<section id="dataset">
<h2>Dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h2>
<p>A <em>dataset</em> is the abstraction that manages a coherent collection of <em>data samples</em> for a specific purpose.
It makes the link between a set of <strong>data samples</strong> and an <strong>Objective</strong> through an <strong>opener</strong>.</p>
<p>A <em>dataset</em> is composed of:</p>
<ul class="simple">
<li><p>an <strong>opener</strong>: it is in fact a script that opens and loads data in memory to fit the purpose of the objective (<a class="reference external" href="https://github.com/SubstraFoundation/substra-tools/blob/master/docs/api.md#opener">python implementation</a>). It can also apply preprocessing to the <strong>data samples</strong>.</p></li>
<li><p>a description: define the opener interface, that is to say what is returned by the opener.</p></li>
</ul>
<p>For now Substra users only work with labeled datasets. Substra users are expected to design preprocess and build specific clean and labeled datasets by applying preprocessing tasks and for a specific objective. Part of the operations can be done in the opener.</p>
<section id="data-samples-and-datasets">
<h3>Data samples and datasets<a class="headerlink" href="#data-samples-and-datasets" title="Permalink to this headline">¶</a></h3>
<p>Datasets are not a fixed set of data samples. Data samples can be linked to multiple datasets and new data samples can be linked to existing datasets even if these already have links to other data samples.</p>
<p>Datasets act as an interface between algorithms and objectives on one side and data samples on the other side.</p>
</section>
<section id="data-opener">
<h3>Data opener<a class="headerlink" href="#data-opener" title="Permalink to this headline">¶</a></h3>
<p>A data opener is a script which reads files and returns in-memory objects that algorithms and metrics will be able to use.</p>
<p><img alt="Data opener" src="_images/dataset-files-opener.png" /></p>
</section>
<section id="link-with-other-concepts">
<h3>Link with other concepts<a class="headerlink" href="#link-with-other-concepts" title="Permalink to this headline">¶</a></h3>
<p>A dataset can only be associated with a single objective.</p>
</section>
</section>
<section id="algo">
<h2>Algo<a class="headerlink" href="#algo" title="Permalink to this headline">¶</a></h2>
<p>An algo is a script (typically a python file) for defining and training an ML architecture, together with a specific context specifying the dependencies (represented as a Dockerfile) for running the script.</p>
<p>The Docker container is built from an archive containing:</p>
<ul class="simple">
<li><p>a Dockerfile and the required dependencies</p></li>
<li><p>an algo python script</p></li>
</ul>
<p>The algo must follow a specific template to be executed properly, basically overloading a train and a predict function (<a class="reference external" href="https://github.com/SubstraFoundation/substra-tools/blob/master/docs/api.md#algo">python implementation</a>).</p>
<section id="id1">
<h3>Link with other concepts<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>An algorithm is linked to a unique objective.</p>
</section>
</section>
<section id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>A model is an architecture and a set of parameters specifying completely a predictive function. Typically, it corresponds to the weights of a neural networks in the form of a parsable file (e.g. json or hdf5). Substra helps training new models from older ones by using an algorithm and a dataset.</p>
<section id="id2">
<h3>Link with other concepts<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>A model is linked with one or several input models, a dataset, and an algo (and a objective by transitivity).</p>
</section>
</section>
<section id="traintuple">
<h2>Traintuple<a class="headerlink" href="#traintuple" title="Permalink to this headline">¶</a></h2>
<p>A traintuple is the explicit specification of a training task. It contains the references of all the assets involved in the training task:</p>
<ul class="simple">
<li><p>the train data samples</p></li>
<li><p>the data manager</p></li>
<li><p>the algo</p></li>
<li><p>the set of input models (optional)</p></li>
</ul>
<p>A sequence of traintuple defines a training trajectory.</p>
<section id="id3">
<h3>Link with other concepts<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>A traintuple is linked with an objective, one algo, several models, and several train data samples.</p>
</section>
</section>
<section id="testtuple">
<h2>Testtuple<a class="headerlink" href="#testtuple" title="Permalink to this headline">¶</a></h2>
<p>A testtuple is the explicit specification of a testing task, corresponding to the evaluation of a model on test data.  It contains the references of all the assets involved in the testing task:</p>
<ul class="simple">
<li><p>the traintuple (and therefore the model)</p></li>
<li><p>the algo</p></li>
<li><p>the data manager</p></li>
<li><p>the test data samples</p></li>
</ul>
<p>However, this can be reduced to simply providing the sole traintuple. The platform will explore its relationship with other assets to find the matching algo, data manager and test data samples.</p>
<p>Using the metrics of the objective linked to the algo, a performance is computed.</p>
<section id="id4">
<h3>Link with other concepts<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>A testtuple is linked with a traintuple.</p>
</section>
</section>
<section id="machine-learning-tasks">
<h2>Machine Learning tasks<a class="headerlink" href="#machine-learning-tasks" title="Permalink to this headline">¶</a></h2>
<p>Training and testing tasks are specified by <a class="reference external" href="#traintuple">traintuples</a> and <a class="reference external" href="#testtuple">testtuples</a> within Substra.</p>
<p>In particular, they contain the specification of train or test data, that are located in one node for a given <code class="docutils literal notranslate"><span class="pre">traintuple</span></code> or <code class="docutils literal notranslate"><span class="pre">testtuple</span></code>.</p>
<p>The training and testing tasks take place in the node where data are located.</p>
<section id="train-and-test-data">
<h3>Train and test data<a class="headerlink" href="#train-and-test-data" title="Permalink to this headline">¶</a></h3>
<p>Each data asset is labeled as either <em>test</em> or <em>train</em> data. An objective then references which data assets should be used during the testing phase of an algorithm through the <code class="docutils literal notranslate"><span class="pre">test_data_keys</span></code> objective.
Of course, only assets set as test data can be referenced as test data for an objective, and only the ones set as train data can be referenced by traintuples for training. This ensures test data can never be used during the training phase.
However, it is possible to specify testing tasks with train data, in order to enable cross-validation.</p>
<p>In other words,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">traintuples</span></code> can only have train data that are labeled as train data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">testtuples</span></code> can have test data that are:</p>
<ul>
<li><p>labeled as test data. This corresponds to a <code class="docutils literal notranslate"><span class="pre">certified</span> <span class="pre">testtuple</span></code> that can be used to benchmark models for a given objective.</p></li>
<li><p>labeled as train data. This corresponds to a testtuple to enable cross-validation.</p></li>
</ul>
</li>
</ul>
</section>
<section id="training-task">
<h3>Training task<a class="headerlink" href="#training-task" title="Permalink to this headline">¶</a></h3>
<p>When a new traintuple is added to Substra, the node containing the associated data will execute the training task.
Within this node, Substra creates a new docker container containing the algorithm and mounts in separated volumes its training dependencies:</p>
<ul class="simple">
<li><p>the <strong>data</strong> volume contains all train data in separate directories (identified by their key)</p></li>
<li><p>the <strong>opener</strong> volume contains the opener library provided by the dataset</p></li>
<li><p>the <strong>model</strong> volume contains the input models (identified by their key)</p></li>
<li><p>optionally, for a task part of a compute plan, a <em>local</em> folder that is persistent from one model update to another within the node.</p></li>
</ul>
<p>Substra then runs the algorithm <strong>in training mode</strong> a new model is generated and saved to the <strong>model</strong> volume.</p>
<p>At this point, the training is over.</p>
</section>
<section id="testing-task">
<h3>Testing task<a class="headerlink" href="#testing-task" title="Permalink to this headline">¶</a></h3>
<p>A testing task is triggered when a new testtuple is added to the platform.
It occurs in the node where the associated test data are located.</p>
<p>It happens in two steps: 1) computation of predictions, 2) computation of the associated score.</p>
<p>For prediction, Substra creates a new docker container containing the algorithm with the following volumes:</p>
<ul class="simple">
<li><p><strong>data</strong> which contains the testing data (defined through the <code class="docutils literal notranslate"><span class="pre">test_data_keys</span></code> property of the objective),</p></li>
<li><p><strong>opener</strong> which contain the opener library provided by the dataset,</p></li>
<li><p><strong>model</strong> which contain the model generated during the training phase,</p></li>
<li><p><strong>pred</strong> where the prediction made on test data must be saved.</p></li>
</ul>
<p>Substra then runs the algorithm <strong>in testing mode</strong> and predictions are saved to the <strong>pred</strong> volume.</p>
<p>A new container is then automatically created. Its goal is to compute the metrics on the predicted data. It mounts the following volumes:</p>
<ul class="simple">
<li><p>the <strong>data</strong>, <strong>opener</strong> and <strong>pred</strong> volumes are the same as for the previous container</p></li>
<li><p>the <strong>metrics</strong> volume contains the objective metrics script</p></li>
</ul>
<p>This time however, the <strong>pred</strong> volume contains the predictions. The metrics script is therefore able to compare them with the actual values in <strong>data</strong>. It generates a <strong>perf.json</strong> file containing the score and saves it to the <strong>pred</strong> volume.</p>
</section>
<section id="summary-of-docker-containers-and-volumes">
<h3>Summary of Docker containers and volumes<a class="headerlink" href="#summary-of-docker-containers-and-volumes" title="Permalink to this headline">¶</a></h3>
<p><img alt="Docker containers and volumes" src="_images/training_phase1.png" /></p>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="architecture.html" class="btn btn-neutral float-right" title="Architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="demo.html" class="btn btn-neutral float-left" title="Demo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Substra Foundation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>