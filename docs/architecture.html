

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Architecture &mdash; Substra 1.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="faq.html" />
    <link rel="prev" title="Concepts" href="concepts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Substra
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
</ul>
<p><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Local Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup/index.html">Server setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo.html">Demo</a></li>
</ul>
<p><span class="caption-text">Platform description</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#network">Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#distributed-ledger-technology-dlt-smart-contracts">Distributed Ledger Technology (DLT) &amp; Smart contracts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ledger-a-private-and-permissioned-blockchain">Ledger: a private and permissioned blockchain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smart-contracts-chaincode">Smart contracts (Chaincode)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#backend-api-endpoints">Backend / API endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interface">Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cli-python-sdk">CLI &amp; Python SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frontend-interface">Frontend Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#substra-tools">Substra tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#components-orchestration">Components orchestration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span class="caption-text">Specific entry points</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing to Substra</a></li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Build &amp; publish the documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Substra</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Architecture</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h1>
<p>Main Substra repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra">https://github.com/SubstraFoundation/substra</a></p>
<p><img alt="Software Architecture Overview" src="_images/architecture_overview.png" /></p>
<section id="network">
<h2>Network<a class="headerlink" href="#network" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">hlf-k8s</span></code> repository is an implementation of <a class="reference external" href="https://www.hyperledger.org/projects/fabric">Hyperledger Fabric</a> and is in charge of the initialization of the Fabric network. By default, it will create an <code class="docutils literal notranslate"><span class="pre">orderer</span></code> and two orgs (<code class="docutils literal notranslate"><span class="pre">org-1</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">org-2</span></code>).</p>
<p>Substra Hyperledger Fabric Kubernetes repository: <a class="reference external" href="https://github.com/SubstraFoundation/hlf-k8s">https://github.com/SubstraFoundation/hlf-k8s</a></p>
<section id="distributed-ledger-technology-dlt-smart-contracts">
<h3>Distributed Ledger Technology (DLT) &amp; Smart contracts<a class="headerlink" href="#distributed-ledger-technology-dlt-smart-contracts" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Note: The network is based on the Chaincode repository and is initialized with Certificate Authorities via the deployment of the Hyperledger Fabric Kubernetes repository.</p>
</div></blockquote>
<p>Substra Chaincode repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra-chaincode">https://github.com/SubstraFoundation/substra-chaincode</a></p>
<p>The DLT network is build with the open source software <a class="reference external" href="https://www.hyperledger.org/projects/fabric">Hyperledger Fabric</a>.</p>
<p>More precisely, we use Hyperledger Fabric to deploy a network of several nodes following this kind of configuration:</p>
<ul class="simple">
<li><p>Organisations (Orgs): multiple “application” orgs: For example, there will be one peer, a membership service provider (MSP) and a root certificate authority (RCA) for each organisation. Additionally, there is an “<em>orderer</em>” organisation.</p></li>
<li><p>Channel configuration: One channel whose members are all the orgs.</p></li>
<li><p>Endorsement policies: for example, “any member of the orgs in the channel” (<a class="reference external" href="https://hyperledger-fabric.readthedocs.io/en/latest/endorsement-policies.html#specifying-endorsement-policies-for-a-chaincode">details here</a>)</p></li>
</ul>
</section>
<section id="ledger-a-private-and-permissioned-blockchain">
<h3>Ledger: a private and permissioned blockchain<a class="headerlink" href="#ledger-a-private-and-permissioned-blockchain" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>“The ledger is comprised of a blockchain (‘chain’) to store the immutable, sequenced record in blocks, as well as a state database to maintain current state. There is one ledger per channel. Each peer maintains a copy of the ledger for each channel of which they are a member.”</p>
<p>Source: <a class="reference external" href="https://hyperledger-fabric.readthedocs.io/en/release-1.4/ledger.html">https://hyperledger-fabric.readthedocs.io/en/release-1.4/ledger.html</a></p>
</div></blockquote>
<p>It is a key-value that only contains information about the “compute plan”: <em>Which data was used with which model for x% performance</em>. It is consensually built and can not be corrupted. It is operated by the chaincode. The ledger of each node is updated frequently and consistently in order to register new Assets, set the Asset permissions, and append recent/requested computation tasks to the task history. Only non-sensitive metadata transit within this network.</p>
<p>In the ledger, the following elements are stored:</p>
<ul class="simple">
<li><p>Objective</p>
<ul>
<li><p>Hash of the metrics and url of to request it</p></li>
<li><p>Id and hash of test data; node that stores them</p></li>
<li><p>Permissions</p></li>
</ul>
</li>
<li><p>Dataset</p>
<ul>
<li><p>Hash of the opener and url of to request it</p></li>
<li><p>Id and hash of data; node that stores them</p></li>
<li><p>Permissions</p></li>
</ul>
</li>
<li><p>Algorithm</p>
<ul>
<li><p>Hash of the algo and url of to request it</p></li>
<li><p>Node that created it</p></li>
<li><p>Permissions</p></li>
</ul>
</li>
<li><p>Models</p>
<ul>
<li><p>Specification of training tasks</p></li>
<li><p>Specification of aggregation tasks</p></li>
<li><p>Specification of evaluation tasks</p></li>
</ul>
</li>
</ul>
</section>
<section id="smart-contracts-chaincode">
<h3>Smart contracts (Chaincode)<a class="headerlink" href="#smart-contracts-chaincode" title="Permalink to this headline">¶</a></h3>
<p>Substra Chaincode repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra-chaincode">https://github.com/SubstraFoundation/substra-chaincode</a></p>
<p>Smart contracts are a set of data, rules, definitions and processes that will govern the interactions between the different stakeholders and enable the complete traceability of data use. Additionally, smart contracts can be used for distributed and infalsifiable permissions.</p>
</section>
</section>
<section id="backend-api-endpoints">
<h2>Backend / API endpoints<a class="headerlink" href="#backend-api-endpoints" title="Permalink to this headline">¶</a></h2>
<p>Substra backend repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra-backend">https://github.com/SubstraFoundation/substra-backend</a></p>
<p>The backend is developed in Python and uses the <a class="reference external" href="https://www.django-rest-framework.org/">Django Rest Framework</a>. Most tasks represented in workflows are run asynchronously. To plug the back-end to Hyperledger Fabric, we use the <a class="reference external" href="https://github.com/hyperledger/fabric-sdk-py">Python Fabric SDK</a>.</p>
<p>The backend implements workflows illustrated in the previous figure. Note that these workflows are only an overview, these representations are not perfectly accurate. Please also note that authentication is not represented in these workflows.</p>
</section>
<section id="interface">
<h2>Interface<a class="headerlink" href="#interface" title="Permalink to this headline">¶</a></h2>
<p>Substra SDK &amp; CLI repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra">https://github.com/SubstraFoundation/substra</a></p>
<section id="cli-python-sdk">
<h3>CLI &amp; Python SDK<a class="headerlink" href="#cli-python-sdk" title="Permalink to this headline">¶</a></h3>
<p>The CLI provides an command line interface to interact with the Substra backend. The CLI makes it possible to add Assets to Substra and also to list registered Assets. See <a class="reference external" href="https://github.com/SubstraFoundation/substra/blob/master/references/cli.md#summary">CLI References</a></p>
<p>The SDK provides a Python SDK that permits interactions with the Substra backend. The Python SDK provides the same functionalities as the CLI and offers the flexibility of a Python environment. As Python is a favored programming language of data scientists, it makes it easier for them to interact with Substra. In addition, the SDK makes it possible to integrate Substra in any Python-based application. See <a class="reference external" href="https://github.com/SubstraFoundation/substra/blob/master/references/sdk.md#substrasdk">SDK References</a></p>
</section>
<section id="frontend-interface">
<h3>Frontend Interface<a class="headerlink" href="#frontend-interface" title="Permalink to this headline">¶</a></h3>
<p>Substra Frontend repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra-frontend">https://github.com/SubstraFoundation/substra-frontend</a></p>
<p>The Frontend is a neat tool to visualize and monitor your operations on the platform, your assets and the associated permissions.</p>
</section>
</section>
<section id="substra-tools">
<h2>Substra tools<a class="headerlink" href="#substra-tools" title="Permalink to this headline">¶</a></h2>
<p>Python package defining base classes for assets submitted on the platform:</p>
<ul class="simple">
<li><p>Github repository: <a class="reference external" href="https://github.com/SubstraFoundation/substra-tools">https://github.com/SubstraFoundation/substra-tools</a>.</p></li>
<li><p>Pypi webpage: <a class="reference external" href="https://pypi.org/project/substratools/">https://pypi.org/project/substratools/</a></p></li>
</ul>
<p>It corresponds to the Python package defining base classes for assets submitted on the platform:</p>
<ul class="simple">
<li><p>Objective: metrics script</p></li>
<li><p>Algo: algo script</p></li>
<li><p>Dataset: data opener script</p></li>
</ul>
<section id="components-orchestration">
<h3>Components orchestration<a class="headerlink" href="#components-orchestration" title="Permalink to this headline">¶</a></h3>
<p>Substra relies on several software layers that need to be coordinated together.
To do so, we use <a class="reference external" href="https://kubernetes.io">Kubernetes</a>.</p>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="concepts.html" class="btn btn-neutral float-left" title="Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Substra Foundation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>